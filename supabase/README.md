# README

## Supabase functions

https://supabase.com/dashboard/project/iojoritxhpijprgkjfre/database/functions

Syncing of those files is not automatic. If you update a function on Supabase, make sure to update it here as well.

| Name                                 | Arguments                                                                                                                                                                                | Return type                                                                                                                                                                                                                                                                                                                                                                                                     | Security |
| ------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| add_fighter_advancement              | characteristic_id uuid, fighter_id uuid, xp_cost integer, credits_increase integer                                                                                                       | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| add_fighter_injury                   | input_fighter_id uuid, input_injury_id uuid                                                                                                                                              | TABLE(result json)                                                                                                                                                                                                                                                                                                                                                                                              | Definer  |
| add_fighter_skill                    | credits_increase integer, fighter_id uuid, is_advance boolean, skill_id uuid, xp_cost integer                                                                                            | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| add_fighter_to_gang                  | p_fighter_name text, p_fighter_type_id uuid, p_gang_id uuid, p_cost integer DEFAULT NULL::integer                                                                                        | json                                                                                                                                                                                                                                                                                                                                                                                                            | Definer  |
| apply_fighter_advancement            | p_fighter_id uuid, p_advancement_id uuid                                                                                                                                                 | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| buy_equipment_for_fighter            | fighter_id uuid DEFAULT NULL::uuid, equipment_id uuid DEFAULT NULL::uuid, gang_id uuid DEFAULT NULL::uuid, manual_cost integer DEFAULT NULL::integer, vehicle_id uuid DEFAULT NULL::uuid | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Definer  |
| create_campaign                      | p_campaign_type_id uuid, p_campaign_name text, p_user_id uuid                                                                                                                            | TABLE(id uuid, campaign_name text, campaign_type text, campaign_type_id uuid, created_at timestamp with time zone)                                                                                                                                                                                                                                                                                              | Invoker  |
| delete_equipment_from_fighter        | input_fighter_id uuid, input_vehicle_id uuid, input_equipment_id uuid, input_fighter_equipment_id uuid                                                                                   | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| delete_fighter_and_equipment         | fighter_id uuid, operations jsonb                                                                                                                                                        | text                                                                                                                                                                                                                                                                                                                                                                                                            | Invoker  |
| delete_fighter_skill                 | fighter_skill_id uuid                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| delete_gang                          | input_gang_id uuid                                                                                                                                                                       | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |
| feed_fighter                         | fighter_id uuid                                                                                                                                                                          | json                                                                                                                                                                                                                                                                                                                                                                                                            | Definer  |
| get_available_skills                 | fighter_id uuid                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Definer  |
| get_campaign_details                 | campaign_id uuid                                                                                                                                                                         | SETOF json                                                                                                                                                                                                                                                                                                                                                                                                      | Definer  |
| get_campaign_territories             | campaign_id uuid                                                                                                                                                                         | SETOF json                                                                                                                                                                                                                                                                                                                                                                                                      | Invoker  |
| get_equipment_with_discounts         | gang_type_id uuid DEFAULT NULL::uuid, equipment_category text DEFAULT NULL::text, fighter_type_id uuid DEFAULT NULL::uuid                                                                | TABLE(id uuid, equipment_name text, trading_post_category text, availability text, base_cost numeric, discounted_cost numeric, equipment_category text, equipment_type text, created_at timestamp with time zone, fighter_type_equipment boolean)                                                                                                                                                               | Definer  |
| get_fighter_available_advancements   | fighter_id uuid                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Definer  |
| get_fighter_details                  | input_fighter_id uuid                                                                                                                                                                    | TABLE(result json)                                                                                                                                                                                                                                                                                                                                                                                              | Definer  |
| get_fighter_skills                   | fighter_id uuid                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Definer  |
| get_fighter_stat_changes             | p_gang_id uuid                                                                                                                                                                           | TABLE(fighter_id uuid, fighter_name text, change_id uuid, credits_value text, value_type text)                                                                                                                                                                                                                                                                                                                  | Invoker  |
| get_fighter_types_with_cost          | p_gang_type_id uuid                                                                                                                                                                      | TABLE(id uuid, fighter_type text, fighter_class text, gang_type text, cost numeric, gang_type_id uuid, special_rules text[], movement numeric, weapon_skill numeric, ballistic_skill numeric, strength numeric, toughness numeric, wounds numeric, initiative numeric, leadership numeric, cool numeric, willpower numeric, intelligence numeric, attacks numeric, default_equipment jsonb, total_cost numeric) | Definer  |
| get_gang_details                     | p_gang_id uuid                                                                                                                                                                           | TABLE(id uuid, name text, gang_type text, gang_type_id uuid, gang_type_image_url text, credits numeric, reputation numeric, meat numeric, exploration_points numeric, rating numeric, alignment alignment, positioning jsonb, note text, stash json, created_at timestamp with time zone, last_updated timestamp with time zone, fighters json, campaigns json, vehicles json)                                  | Definer  |
| get_secondary_skills_for_class       | fighter_class text                                                                                                                                                                       | text[]                                                                                                                                                                                                                                                                                                                                                                                                          | Invoker  |
| get_stat_change_categories           | \-                                                                                                                                                                                       | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Definer  |
| get_user_campaigns                   | user_id uuid                                                                                                                                                                             | TABLE(id uuid, campaign_name text, campaign_type text, campaign_type_id uuid, created_at timestamp with time zone, role text, status text)                                                                                                                                                                                                                                                                      | Definer  |
| get_user_gangs                       | user_id uuid                                                                                                                                                                             | TABLE(id uuid, name text, gang_type text, gang_type_id uuid, image_url text, credits numeric, reputation numeric, meat numeric, exploration_points numeric, rating numeric, created_at timestamp with time zone, last_updated timestamp with time zone)                                                                                                                                                         | Definer  |
| get_vehicle_equipment_with_discounts | gang_type_id uuid DEFAULT NULL::uuid, equipment_category text DEFAULT NULL::text, fighter_type_id uuid DEFAULT NULL::uuid                                                                | TABLE(id uuid, equipment_name text, trading_post_category text, availability text, base_cost numeric, discounted_cost numeric, equipment_category text, equipment_type text, created_at timestamp with time zone, fighter_type_equipment boolean)                                                                                                                                                               | Definer  |
| move_fighter_position                | p_gang_id integer, p_fighter_id integer, p_current_index integer, p_target_index integer                                                                                                 | void                                                                                                                                                                                                                                                                                                                                                                                                            | Invoker  |
| move_from_stash                      | p_stash_id uuid, p_fighter_id uuid                                                                                                                                                       | json                                                                                                                                                                                                                                                                                                                                                                                                            | Definer  |
| move_to_gang_stash                   | fighter_equipment_id uuid                                                                                                                                                                | uuid                                                                                                                                                                                                                                                                                                                                                                                                            | Definer  |
| safe_to_numeric                      | v text                                                                                                                                                                                   | numeric                                                                                                                                                                                                                                                                                                                                                                                                         | Invoker  |
| sell_equipment_from_fighter          | fighter_equipment_id uuid, manual_cost integer DEFAULT NULL::integer                                                                                                                     | jsonb                                                                                                                                                                                                                                                                                                                                                                                                           | Invoker  |